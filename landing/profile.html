<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FitApp ‚Äî –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="profile-style.css" />
  <script>try{if(localStorage.getItem('fitapp_web_theme')==='light')document.documentElement.setAttribute('data-theme','light')}catch(e){}</script>
</head>
<body>

  <nav class="nav">
    <div class="nav-inner">
      <a href="index.html" class="nav-logo" style="text-decoration:none;color:var(--text);">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none">
          <path d="M6.5 6.5L17.5 17.5M4 9L9 4M15 20L20 15M3 12L12 3M12 21L21 12M2 15L15 2M9 22L22 9"
            stroke="#8B83FF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        FitApp
      </a>
      <div class="nav-links">
        <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="profile.html" class="active">–ö–∞–±–∏–Ω–µ—Ç</a>
      </div>
      <div style="display:flex;align-items:center;gap:12px;">
        <button class="theme-toggle" onclick="toggleTheme()" title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É" id="themeToggle">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" id="themeIcon">
            <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <div id="navAuth"></div>
      </div>
    </div>
  </nav>

  <section class="profile-hero">
    <div class="container">
      <div class="profile-header">
        <div class="profile-avatar" id="profileAvatar" onclick="handleAvatarHeaderClick()" title="–ù–∞–∂–º–∏—Ç–µ –¥–ª—è —Å–º–µ–Ω—ã –∞–≤–∞—Ç–∞—Ä–∞">
          <svg width="36" height="36" viewBox="0 0 24 24" fill="none">
            <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2" stroke="var(--text-secondary)" stroke-width="1.5" stroke-linecap="round"/>
            <circle cx="12" cy="7" r="4" stroke="var(--text-secondary)" stroke-width="1.5"/>
          </svg>
          <div class="profile-avatar-overlay">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="12" cy="13" r="4" stroke="#fff" stroke-width="2"/></svg>
          </div>
        </div>
        <input type="file" id="avatarFileInput" accept="image/*" style="display:none" onchange="uploadAvatar(this)"/>
        <div class="profile-info">
          <h1 class="profile-name" id="profileName">‚Äî</h1>
          <p class="profile-email" id="profileEmail">‚Äî</p>
        </div>
        <button class="profile-logout-btn" onclick="handleLogout()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
            <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          –í—ã–π—Ç–∏
        </button>
      </div>
    </div>
  </section>

  <section class="profile-tabs-section">
    <div class="container">
      <div class="profile-tabs">
        <button class="profile-tab active" data-tab="progress" onclick="switchTab('progress')">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
            <path d="M18 20V10M12 20V4M6 20V14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          –ü—Ä–æ–≥—Ä–µ—Å—Å
        </button>
        <button class="profile-tab" data-tab="community" onclick="switchTab('community')">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5"/>
            <path d="M2 12h20M12 2c2.5 2.7 4 6.2 4 10s-1.5 7.3-4 10M12 2C9.5 4.7 8 8.2 8 12s1.5 7.3 4 10" stroke="currentColor" stroke-width="1.5"/>
          </svg>
          –°–æ–æ–±—â–µ—Å—Ç–≤–æ
        </button>
        <button class="profile-tab" data-tab="settings" onclick="switchTab('settings')">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.5"/>
            <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 01-2.83 2.83l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-4 0v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 010-4h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 012.83-2.83l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 014 0v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 010 4h-.09a1.65 1.65 0 00-1.51 1z" stroke="currentColor" stroke-width="1.5"/>
          </svg>
          –ù–∞—Å—Ç—Ä–æ–π–∫–∏
        </button>
      </div>
    </div>
  </section>

  <div class="tab-content" id="tab-progress">
    <section class="section dashboard-section">
      <div class="container">
        <div class="dash-stats fade-in">
          <div class="glass dash-stat-card">
            <div class="dash-stat-icon" style="background:var(--tint-light);">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M6.5 6.5L17.5 17.5M4 9L9 4M15 20L20 15M3 12L12 3M12 21L21 12" stroke="var(--tint)" stroke-width="2" stroke-linecap="round"/></svg>
            </div>
            <div class="dash-stat-val" id="dashTotalWorkouts">0</div>
            <div class="dash-stat-lbl">–í—Å–µ–≥–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</div>
          </div>
          <div class="glass dash-stat-card">
            <div class="dash-stat-icon" style="background:var(--success-light);">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="var(--success)" stroke-width="2"/><polyline points="12,6 12,12 16,14" stroke="var(--success)" stroke-width="2" stroke-linecap="round"/></svg>
            </div>
            <div class="dash-stat-val" id="dashTotalMinutes">0</div>
            <div class="dash-stat-lbl">–ú–∏–Ω—É—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</div>
          </div>
          <div class="glass dash-stat-card">
            <div class="dash-stat-icon" style="background:var(--warning-light);">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M18 20V10M12 20V4M6 20V14" stroke="var(--warning)" stroke-width="2.5" stroke-linecap="round"/></svg>
            </div>
            <div class="dash-stat-val" id="dashWeekWorkouts">0</div>
            <div class="dash-stat-lbl">–ó–∞ —ç—Ç—É –Ω–µ–¥–µ–ª—é</div>
          </div>
          <div class="glass dash-stat-card">
            <div class="dash-stat-icon" style="background:var(--danger-light);">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M13 2L3 14H12L11 22L21 10H12L13 2Z" fill="var(--danger)"/></svg>
            </div>
            <div class="dash-stat-val" id="dashWeekMinutes">0</div>
            <div class="dash-stat-lbl">–ú–∏–Ω—É—Ç –∑–∞ –Ω–µ–¥–µ–ª—é</div>
          </div>
        </div>

        <div class="glass dash-chart-card fade-in dash-calories-card">
          <h3 class="dash-chart-title">üî• –ö–∞–ª–æ—Ä–∏–∏</h3>
          <div class="dash-cal-stats">
            <div class="dash-cal-stat">
              <div class="dash-cal-stat-val" id="dashTodayCal" style="color:var(--warning);">0</div>
              <div class="dash-cal-stat-lbl">–°–µ–≥–æ–¥–Ω—è</div>
            </div>
            <div class="dash-cal-divider"></div>
            <div class="dash-cal-stat">
              <div class="dash-cal-stat-val" id="dashWeekCal" style="color:var(--tint);">0</div>
              <div class="dash-cal-stat-lbl">–ó–∞ –Ω–µ–¥–µ–ª—é</div>
            </div>
            <div class="dash-cal-divider"></div>
            <div class="dash-cal-stat">
              <div class="dash-cal-stat-val" id="dashTotalCal" style="color:var(--success);">0</div>
              <div class="dash-cal-stat-lbl">–í—Å–µ–≥–æ</div>
            </div>
          </div>
          <div class="dash-cal-unit">–∫–∫–∞–ª</div>
        </div>

        <div class="glass dash-chart-card fade-in dash-water-card">
          <h3 class="dash-chart-title">üíß –í–æ–¥–∞</h3>
          <div class="dash-water-top">
            <div class="dash-water-ring" id="waterRing">
              <svg viewBox="0 0 80 80" width="80" height="80">
                <circle cx="40" cy="40" r="34" fill="none" stroke="rgba(96,165,250,0.15)" stroke-width="6"/>
                <circle cx="40" cy="40" r="34" fill="none" stroke="#60A5FA" stroke-width="6"
                  stroke-dasharray="213.6" stroke-dashoffset="213.6" stroke-linecap="round"
                  transform="rotate(-90 40 40)" id="waterRingProgress"/>
              </svg>
              <div class="dash-water-ring-label" id="waterPercent">0%</div>
            </div>
            <div class="dash-water-info">
              <div class="dash-water-consumed" id="waterConsumedMl">0 –º–ª</div>
              <div class="dash-water-target" id="waterTargetLabel">–∏–∑ 2000 –º–ª (0/8 —Å—Ç–∞–∫–∞–Ω–æ–≤)</div>
              <div class="dash-water-btns">
                <button class="dash-water-btn dash-water-btn-minus" onclick="webRemoveGlass()" title="–£–±—Ä–∞—Ç—å —Å—Ç–∞–∫–∞–Ω">‚àí</button>
                <button class="dash-water-btn dash-water-btn-plus" onclick="webAddGlass()" title="–î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞–∫–∞–Ω">+</button>
              </div>
            </div>
          </div>
          <div class="dash-water-glasses" id="waterGlassGrid"></div>
          <div class="dash-water-week" id="waterWeekChart"></div>
        </div>


        <div class="glass dash-chart-card fade-in">
          <h3 class="dash-chart-title">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞ –Ω–µ–¥–µ–ª—é</h3>
          <div class="dash-chart" id="dashWeekChart"></div>
        </div>


        <div class="glass dash-workouts-card fade-in">
          <div class="dash-workouts-header">
            <h3 class="dash-chart-title">–ú–æ–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h3>
            <span class="dash-workout-count" id="dashWorkoutCount">0</span>
          </div>
          <div class="dash-workouts-list" id="dashWorkoutsList">
            <div style="text-align:center;padding:40px 0;color:var(--text-secondary);">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
          </div>
        </div>

        <div class="glass dash-workouts-card fade-in">
          <h3 class="dash-chart-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h3>
          <div class="dash-logs-list" id="dashLogsList">
            <div style="text-align:center;padding:40px 0;color:var(--text-secondary);">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
          </div>
        </div>

        <div class="glass dash-bmi-card fade-in">
          <div class="dash-bmi-header">
            <h3 class="dash-chart-title">–ò–Ω–¥–µ–∫—Å –º–∞—Å—Å—ã —Ç–µ–ª–∞ (–ò–ú–¢)</h3>
            <div class="dash-bmi-value" id="bmiValue">--</div>
          </div>
          <div class="dash-bmi-bar-wrap">
            <div class="dash-bmi-bar">
              <div class="dash-bmi-zone" style="flex:4.5;background:#3B82F6;border-radius:8px 0 0 8px;" title="–î–µ—Ñ–∏—Ü–∏—Ç: <18.5"></div>
              <div class="dash-bmi-zone" style="flex:6.5;background:#10B981;" title="–ù–æ—Ä–º–∞: 18.5‚Äì25"></div>
              <div class="dash-bmi-zone" style="flex:5;background:#F59E0B;" title="–ò–∑–±—ã—Ç–æ–∫: 25‚Äì30"></div>
              <div class="dash-bmi-zone" style="flex:10;background:#EF4444;border-radius:0 8px 8px 0;" title="–û–∂–∏—Ä–µ–Ω–∏–µ: >30"></div>
              <div class="dash-bmi-pointer" id="bmiPointer" style="left:0%;"></div>
            </div>
            <div class="dash-bmi-labels">
              <span>16</span><span>18.5</span><span>25</span><span>30</span><span>40</span>
            </div>
          </div>
          <div class="dash-bmi-status" id="bmiStatus"></div>
          <div class="dash-bmi-details" id="bmiDetails"></div>
        </div>
      </div>
    </section>
  </div>


  <div class="tab-content" id="tab-community" style="display:none;">
    <section class="section">
      <div class="container">
        <div class="community-controls fade-in">
          <div class="community-search-wrap">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path d="M21 21L16.65 16.65M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z"
                stroke="#9CA3AF" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <input type="text" class="community-search" placeholder="–ü–æ–∏—Å–∫ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫..." id="communitySearch" oninput="loadCommunity()"/>
          </div>
          <div class="community-sort-chips">
            <button class="filter-chip active" data-sort="recent" onclick="setCommunitySort('recent')">–ù–æ–≤—ã–µ</button>
            <button class="filter-chip" data-sort="popular" onclick="setCommunitySort('popular')">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ</button>
            <button class="filter-chip" data-sort="views" onclick="setCommunitySort('views')">–ü–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞–º</button>
          </div>
        </div>
        <div class="community-grid fade-in" id="communityList">
          <div style="text-align:center;padding:60px 0;color:var(--text-secondary);grid-column:1/-1;">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
      </div>
    </section>
  </div>


  <div class="tab-content" id="tab-settings" style="display:none;">
    <section class="section">
      <div class="container">
        <div class="settings-grid">

          <div class="glass settings-card">
            <div class="settings-card-header">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2" stroke="var(--tint)" stroke-width="2" stroke-linecap="round"/>
                <circle cx="12" cy="7" r="4" stroke="var(--tint)" stroke-width="2"/>
              </svg>
              <h3>–ê–≤–∞—Ç–∞—Ä</h3>
            </div>
            <p class="settings-desc">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∫–æ–Ω–∫—É</p>

            <div class="avatar-upload-area" id="avatarUploadArea">
              <div class="avatar-upload-preview" id="avatarUploadPreview">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
                  <path d="M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  <circle cx="12" cy="13" r="4" stroke="currentColor" stroke-width="1.5"/>
                </svg>
              </div>
              <div class="avatar-upload-info">
                <button class="avatar-upload-btn" onclick="document.getElementById('settingsAvatarFile').click()">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                  –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ
                </button>
                <span class="avatar-upload-hint">JPG, PNG, WEBP. –ú–∞–∫—Å. 5–ú–ë</span>
                <input type="file" id="settingsAvatarFile" accept="image/*" style="display:none" onchange="uploadAvatar(this)"/>
              </div>
              <div id="avatarUploadMsg" class="settings-msg"></div>
            </div>
          </div>


          <div class="glass settings-card">
            <div class="settings-card-header">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" stroke="var(--tint)" stroke-width="2" stroke-linecap="round"/>
                <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" stroke="var(--tint)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <h3>–õ–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
            </div>
            <div class="settings-form">
              <div class="settings-field">
                <label>–ò–º—è</label>
                <input type="text" id="settingsName" class="settings-input" placeholder="–í–∞—à–µ –∏–º—è"/>
              </div>
              <div class="settings-field">
                <label>Email</label>
                <input type="email" id="settingsEmail" class="settings-input" disabled placeholder="Email"/>
              </div>
              <div class="settings-row">
                <div class="settings-field">
                  <label>–†–æ—Å—Ç (—Å–º)</label>
                  <input type="number" id="settingsHeight" class="settings-input" placeholder="175"/>
                </div>
                <div class="settings-field">
                  <label>–í–µ—Å (–∫–≥)</label>
                  <input type="number" id="settingsWeight" class="settings-input" placeholder="70"/>
                </div>
              </div>
              <div class="settings-field">
                <label>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                <input type="date" id="settingsBirth" class="settings-input"/>
              </div>
              <div class="settings-field">
                <label>–¶–µ–ª—å</label>
                <select id="settingsGoal" class="settings-input">
                  <option value="">–ù–µ —É–∫–∞–∑–∞–Ω–∞</option>
                  <option value="lose_weight">–ü–æ—Ö—É–¥–µ—Ç—å</option>
                  <option value="gain_muscle">–ù–∞–±—Ä–∞—Ç—å –º–∞—Å—Å—É</option>
                  <option value="maintain">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å —Ñ–æ—Ä–º—É</option>
                  <option value="endurance">–í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å</option>
                  <option value="flexibility">–ì–∏–±–∫–æ—Å—Ç—å</option>
                </select>
              </div>
              <div id="profileSaveMsg" class="settings-msg"></div>
              <button class="settings-save-btn" onclick="saveProfile()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                  <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <polyline points="17,21 17,13 7,13 7,21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  <polyline points="7,3 7,8 15,8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
              </button>
            </div>
          </div>


          <div class="glass settings-card">
            <div class="settings-card-header">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <rect x="3" y="11" width="18" height="11" rx="2" stroke="var(--tint)" stroke-width="2"/>
                <path d="M7 11V7a5 5 0 0110 0v4" stroke="var(--tint)" stroke-width="2" stroke-linecap="round"/>
              </svg>
              <h3>–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è</h3>
            </div>
            <div class="settings-form">
              <div class="settings-field">
                <label>–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
                <input type="password" id="pwdCurrent" class="settings-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å"/>
              </div>
              <div class="settings-field">
                <label>–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                <input type="password" id="pwdNew" class="settings-input" placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤"/>
              </div>
              <div class="settings-field">
                <label>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
                <input type="password" id="pwdConfirm" class="settings-input" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å"/>
              </div>
              <div id="pwdSaveMsg" class="settings-msg"></div>
              <button class="settings-save-btn" onclick="changePassword()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                  <rect x="3" y="11" width="18" height="11" rx="2" stroke="currentColor" stroke-width="2"/>
                  <path d="M7 11V7a5 5 0 0110 0v4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>


  <div class="modal-overlay" id="communityDetailModal" style="display:none;">
    <div class="community-detail-card glass elevated" id="communityDetailContent"></div>
  </div>


  <div class="modal-overlay" id="publishModal" style="display:none;" onclick="if(event.target===this)closePublishModal()">
    <div class="publish-modal glass elevated">
      <button class="auth-close" onclick="closePublishModal()">&times;</button>
      <h3 class="publish-modal-title">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É</h3>
      <p class="publish-modal-desc">–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–æ–π —Å —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º</p>
      <div class="publish-workout-badge" id="publishWorkoutBadge"></div>
      <div class="settings-form">
        <div class="settings-field">
          <label>–ù–∞–∑–≤–∞–Ω–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</label>
          <input type="text" id="publishTitle" class="settings-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –£–±–∏–π—Å—Ç–≤–µ–Ω–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –Ω–∞ –≥—Ä—É–¥—å"/>
        </div>
        <div class="settings-field">
          <label>–û–ø–∏—Å–∞–Ω–∏–µ <span style="color:var(--text-secondary);font-weight:400;">(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</span></label>
          <textarea id="publishDesc" class="settings-input publish-textarea" rows="3" placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ..."></textarea>
        </div>
        <div class="settings-field">
          <label>–°–ª–æ–∂–Ω–æ—Å—Ç—å</label>
          <div class="publish-diff-chips">
            <button class="filter-chip active" data-diff="intermediate" onclick="setPublishDiff('intermediate')">–°—Ä–µ–¥–Ω–∏–π</button>
            <button class="filter-chip" data-diff="beginner" onclick="setPublishDiff('beginner')">–ù–∞—á–∏–Ω–∞—é—â–∏–π</button>
            <button class="filter-chip" data-diff="advanced" onclick="setPublishDiff('advanced')">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</button>
          </div>
        </div>
        <div id="publishMsg" class="settings-msg"></div>
        <button class="settings-save-btn publish-submit-btn" onclick="submitPublish()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
            <path d="M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å
        </button>
      </div>
    </div>
  </div>

  <div class="modal-overlay" id="authModal" style="display:none;">
    <div id="authModalContent"></div>
  </div>


  <div class="crop-modal-overlay" id="cropModal" style="display:none;">
    <div class="crop-modal">
      <div class="crop-modal-header">
        <button class="crop-modal-btn crop-cancel" onclick="closeCropModal()">–û—Ç–º–µ–Ω–∞</button>
        <span class="crop-modal-title">–ö–∞–¥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ</span>
        <button class="crop-modal-btn crop-confirm" onclick="confirmCrop()">–ì–æ—Ç–æ–≤–æ</button>
      </div>
      <div class="crop-area" id="cropArea">
        <canvas id="cropCanvas"></canvas>
        <div class="crop-circle-overlay" id="cropCircleOverlay"></div>
      </div>
      <div class="crop-hint">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–ª—ë—Å–∏–∫–æ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è</div>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="footer-inner">
        <div class="footer-left">&copy; 2026 FitApp. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</div>
        <div class="footer-links">
          <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
          <a href="#">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
          <a href="#">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</a>
        </div>
      </div>
    </div>
  </footer>

  <script src="profile.js"></script>
</body>
</html>
